#include "Lexer.h"
#include "postfixParser.h"
#include "rpnArrayEval.h"
#include <stdio.h>
#include <stdlib.h>

int main(void){
    //print the tokens generated by the user
    char input[]="(tan(5.76 * x)-ln(9.17 * x))";
    token *tokenized=lex(input);

    printf("String: %s\n",input);
    int x=0;
    while(x<=strlen(input)){
        printf("Token: %s, Type: %d\n",tokenized[x].text, tokenized[x].type);
        x++;
    }

    //Call parser and print the postfix Array
    Stack *postfixArray=parser(tokenized, input);
    printf("\nPostfix:\n");
    for(int i=0;i<=postfixArray->top;i++)
        printf("%s\n",postfixArray->stack[i].text);

    //Call eval and print the value at x=10
    double v,val;
    printf("Enter the decimal number, the expression is to be evaluated at>");
    scanf("%lf",&v);
    val=eval(postfixArray,v);
    printf("\nThe value of the entered expression at %lf is %lf\n",v,val);
    return(0);
}
